# ==========================================
# SWAGGER SCHEMAS
# ==========================================
# Common reusable schemas for API documentation
# ==========================================

components:
  schemas:
    # ==========================================
    # USER SCHEMAS
    # ==========================================
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique user identifier
        email:
          type: string
          format: email
          description: User email address
        firstName:
          type: string
          description: User first name
        lastName:
          type: string
          description: User last name
        userType:
          type: string
          enum:
            - PLATFORM_SUPER_ADMIN
            - PLATFORM_ADMIN
            - ORGANIZATION_ADMIN
            - ORG_RECRUITER
            - EMPLOYEE_REFERRER
            - JOB_SEEKER
            - REFERRAL_PROVIDER
          description: Type of user
        isActive:
          type: boolean
          description: Whether user account is active
        isBlocked:
          type: boolean
          description: Whether user is blocked
        emailVerified:
          type: boolean
          description: Whether email is verified
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp

    UserRegistration:
      type: object
      required:
        - email
        - password
        - firstName
        - lastName
        - userType
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
        password:
          type: string
          format: password
          minLength: 8
          example: SecurePassword123!
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        userType:
          type: string
          enum: [JOB_SEEKER, REFERRAL_PROVIDER]
          example: JOB_SEEKER

    UserLogin:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
        password:
          type: string
          format: password
          example: SecurePassword123!

    LoginResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: Login successful
        data:
          type: object
          properties:
            user:
              $ref: "#/components/schemas/User"
            accessToken:
              type: string
              description: JWT access token
            expiresIn:
              type: number
              description: Token expiry time in seconds
              example: 3600

    # ==========================================
    # SESSION SCHEMAS
    # ==========================================
    UserSession:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        deviceName:
          type: string
          example: Chrome on Windows
        ipAddress:
          type: string
          example: 192.168.1.1
        userAgent:
          type: string
        status:
          type: string
          enum: [ACTIVE, EXPIRED, LOGGED_OUT, REVOKED]
        lastActivityAt:
          type: string
          format: date-time
        expiresAt:
          type: string
          format: date-time

    # ==========================================
    # INVITE SCHEMAS
    # ==========================================
    InviteToken:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        inviteType:
          type: string
          enum: [PLATFORM_ADMIN, ORG_ADMIN, ORG_RECRUITER, EMPLOYEE]
        status:
          type: string
          enum: [PENDING, ACCEPTED, EXPIRED, REVOKED]
        invitedBy:
          type: string
          format: uuid
        organizationId:
          type: string
          format: uuid
        expiresAt:
          type: string
          format: date-time

    SendInviteRequest:
      type: object
      required:
        - email
        - inviteType
      properties:
        email:
          type: string
          format: email
          example: newuser@example.com
        inviteType:
          type: string
          enum: [PLATFORM_ADMIN, ORG_ADMIN, ORG_RECRUITER, EMPLOYEE]
          example: ORG_RECRUITER
        organizationId:
          type: string
          format: uuid
          description: Required for organization-level invites

    AcceptInviteRequest:
      type: object
      required:
        - token
        - password
        - firstName
        - lastName
      properties:
        token:
          type: string
          example: invite_token_here
        password:
          type: string
          format: password
          minLength: 8
        firstName:
          type: string
        lastName:
          type: string

    # ==========================================
    # ORGANIZATION SCHEMAS
    # ==========================================
    Organization:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "123e4567-e89b-12d3-a456-426614174000"
          description: Unique organization identifier
        name:
          type: string
          example: "Acme Corporation"
          description: Organization name
        description:
          type: string
          example: "Leading provider of innovative solutions"
          description: Organization description
        website:
          type: string
          format: uri
          example: "https://acme.com"
          description: Organization website URL
        industry:
          type: string
          example: "Technology"
          description: Industry sector
        size:
          type: string
          example: "100-500"
          description: Company size range
        location:
          type: string
          example: "San Francisco, CA"
          description: Organization location
        logo:
          type: string
          format: uri
          example: "https://acme.com/logo.png"
          description: Organization logo URL
        isActive:
          type: boolean
          example: true
          description: Whether organization is active
        isVerified:
          type: boolean
          example: true
          description: Whether organization is verified
        verifiedAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T10:30:00Z"
          description: Verification timestamp
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
          description: Last update timestamp

    CreateOrganizationRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
          example: "Acme Corporation"
        description:
          type: string
          maxLength: 500
          example: "Leading provider of innovative solutions"
        website:
          type: string
          format: uri
          example: "https://acme.com"
        industry:
          type: string
          example: "Technology"
        size:
          type: string
          example: "100-500"
        location:
          type: string
          example: "San Francisco, CA"
        logo:
          type: string
          format: uri
          example: "https://acme.com/logo.png"

    UpdateOrganizationRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
        description:
          type: string
          maxLength: 500
        website:
          type: string
          format: uri
        industry:
          type: string
        size:
          type: string
        location:
          type: string
        logo:
          type: string
          format: uri

    OrganizationStats:
      type: object
      properties:
        totalAdmins:
          type: integer
          example: 5
          description: Total number of organization admins
        totalRecruiters:
          type: integer
          example: 12
          description: Total number of recruiters
        totalEmployees:
          type: integer
          example: 150
          description: Total number of employees
        totalJobs:
          type: integer
          example: 25
          description: Total number of jobs posted
        totalApplications:
          type: integer
          example: 340
          description: Total number of applications received
        totalReferrals:
          type: integer
          example: 89
          description: Total number of referrals made

    # ==========================================
    # JOB SCHEMAS
    # ==========================================
    Job:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "123e4567-e89b-12d3-a456-426614174000"
        organization_id:
          type: string
          format: uuid
        posted_by:
          type: string
          format: uuid
        title:
          type: string
          example: "Senior Software Engineer"
        description:
          type: string
          example: "We are looking for an experienced software engineer..."
        requirements:
          type: object
          nullable: true
        location:
          type: string
          nullable: true
          example: "San Francisco, CA"
        job_type:
          type: string
          enum: [full_time, part_time, contract, internship]
          example: full_time
        experience_level:
          type: string
          enum: [entry, mid, senior, lead]
          example: senior
        salary_range_min:
          type: number
          nullable: true
          example: 120000
        salary_range_max:
          type: number
          nullable: true
          example: 180000
        currency:
          type: string
          example: "USD"
        skills_required:
          type: array
          items:
            type: string
          example: ["JavaScript", "React", "Node.js"]
        benefits:
          type: array
          items:
            type: string
          example: ["Health Insurance", "401k", "Remote Work"]
        is_active:
          type: boolean
          example: true
        is_referral_eligible:
          type: boolean
          example: true
        referral_bonus:
          type: number
          nullable: true
          example: 5000
        application_deadline:
          type: string
          format: date
          nullable: true
        posted_date:
          type: string
          format: date-time
        closed_date:
          type: string
          format: date-time
          nullable: true
        closed_reason:
          type: string
          nullable: true
        view_count:
          type: integer
          example: 150
        application_count:
          type: integer
          example: 25
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateJobRequest:
      type: object
      required:
        - title
        - description
        - job_type
        - experience_level
      properties:
        title:
          type: string
          minLength: 5
          maxLength: 200
          example: "Senior Software Engineer"
        description:
          type: string
          minLength: 50
          maxLength: 5000
          example: "We are looking for an experienced software engineer to join our team..."
        requirements:
          type: object
        location:
          type: string
          maxLength: 255
          example: "San Francisco, CA"
        job_type:
          type: string
          enum: [full_time, part_time, contract, internship]
          example: full_time
        experience_level:
          type: string
          enum: [entry, mid, senior, lead]
          example: senior
        salary_range_min:
          type: number
          minimum: 0
          example: 120000
        salary_range_max:
          type: number
          minimum: 0
          example: 180000
        currency:
          type: string
          minLength: 3
          maxLength: 3
          example: "USD"
        skills_required:
          type: array
          items:
            type: string
          example: ["JavaScript", "React", "Node.js"]
        benefits:
          type: array
          items:
            type: string
          example: ["Health Insurance", "401k"]
        is_referral_eligible:
          type: boolean
          example: true
        referral_bonus:
          type: number
          minimum: 0
          example: 5000
        application_deadline:
          type: string
          format: date
          example: "2024-12-31"

    UpdateJobRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 5
          maxLength: 200
        description:
          type: string
          minLength: 50
          maxLength: 5000
        requirements:
          type: object
        location:
          type: string
          maxLength: 255
        job_type:
          type: string
          enum: [full_time, part_time, contract, internship]
        experience_level:
          type: string
          enum: [entry, mid, senior, lead]
        salary_range_min:
          type: number
          minimum: 0
        salary_range_max:
          type: number
          minimum: 0
        currency:
          type: string
          minLength: 3
          maxLength: 3
        skills_required:
          type: array
          items:
            type: string
        benefits:
          type: array
          items:
            type: string
        is_referral_eligible:
          type: boolean
        referral_bonus:
          type: number
          minimum: 0
        application_deadline:
          type: string
          format: date

    JobStats:
      type: object
      properties:
        viewCount:
          type: integer
          example: 150
        applicationCount:
          type: integer
          example: 25
        referralCount:
          type: integer
          example: 10

    # ==========================================
    # APPLICATION SCHEMAS
    # ==========================================
    Application:
      type: object
      properties:
        id:
          type: string
          format: uuid
        job_id:
          type: string
          format: uuid
        applicant_id:
          type: string
          format: uuid
        referral_id:
          type: string
          format: uuid
          nullable: true
        organization_id:
          type: string
          format: uuid
        application_status:
          type: string
          enum: [submitted, screening, interview, offer, hired, rejected, withdrawn]
          example: submitted
        resume_url:
          type: string
          nullable: true
          example: "https://example.com/resume.pdf"
        cover_letter:
          type: string
          nullable: true
        applied_date:
          type: string
          format: date-time
        reviewed_by:
          type: string
          format: uuid
          nullable: true
        last_updated_by:
          type: string
          format: uuid
          nullable: true
        rejection_reason:
          type: string
          nullable: true
        offer_details:
          type: object
          nullable: true
        hired_date:
          type: string
          format: date-time
          nullable: true
        notes:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    SubmitApplicationRequest:
      type: object
      required:
        - job_id
      properties:
        job_id:
          type: string
          format: uuid
        cover_letter:
          type: string
          maxLength: 2000
          example: "I am excited to apply for this position..."
        resume_url:
          type: string
          format: uri
          example: "https://example.com/resume.pdf"
        referral_id:
          type: string
          format: uuid

    UpdateApplicationStatusRequest:
      type: object
      required:
        - application_status
      properties:
        application_status:
          type: string
          enum: [submitted, screening, interview, offer, hired, rejected, withdrawn]
          example: screening
        notes:
          type: string
          maxLength: 1000
        rejection_reason:
          type: string
          maxLength: 500
        offer_details:
          type: object

    ApplicationStats:
      type: object
      properties:
        total:
          type: integer
          example: 45
        byStatus:
          type: object
          additionalProperties:
            type: integer
          example:
            submitted: 15
            screening: 10
            interview: 8
            offer: 5
            hired: 3
            rejected: 4

    # ==========================================
    # REFERRAL SCHEMAS
    # ==========================================
    Referral:
      type: object
      properties:
        id:
          type: string
          format: uuid
        job_id:
          type: string
          format: uuid
        referrer_id:
          type: string
          format: uuid
        candidate_id:
          type: string
          format: uuid
        organization_id:
          type: string
          format: uuid
        referral_type:
          type: string
          enum: [internal, external]
        status:
          type: string
          enum: [pending, accepted, rejected, application_submitted, hired, bonus_paid]
        referral_note:
          type: string
          nullable: true
        recruiter_reviewed_by:
          type: string
          format: uuid
          nullable: true
        reviewed_at:
          type: string
          format: date-time
          nullable: true
        hired_date:
          type: string
          format: date
          nullable: true
        bonus_amount:
          type: number
          format: decimal
          nullable: true
        bonus_paid_date:
          type: string
          format: date
          nullable: true
        rejection_reason:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        job:
          type: object
          nullable: true
        referrer:
          type: object
          nullable: true
        candidate:
          type: object
          nullable: true
        organization:
          type: object
          nullable: true

    SubmitReferralRequest:
      type: object
      required:
        - job_id
        - candidate_id
      properties:
        job_id:
          type: string
          format: uuid
          example: "550e8400-e29b-41d4-a716-446655440000"
        candidate_id:
          type: string
          format: uuid
          example: "660e8400-e29b-41d4-a716-446655440000"
        referral_type:
          type: string
          enum: [internal, external]
          default: external
          example: external
        referral_note:
          type: string
          maxLength: 1000
          example: "Excellent candidate with strong technical skills"

    UpdateReferralStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [pending, accepted, rejected, application_submitted, hired, bonus_paid]
          example: accepted
        notes:
          type: string
          maxLength: 500
          example: "Approved for interview process"

    RejectReferralRequest:
      type: object
      required:
        - rejection_reason
      properties:
        rejection_reason:
          type: string
          minLength: 10
          maxLength: 500
          example: "Candidate does not meet the minimum qualifications for this position"

    ProcessBonusRequest:
      type: object
      required:
        - bonus_amount
      properties:
        bonus_amount:
          type: number
          format: decimal
          minimum: 0
          example: 1000.00
        payment_date:
          type: string
          format: date
          example: "2024-02-15"

    ReferralStats:
      type: object
      properties:
        total:
          type: integer
          example: 50
        byStatus:
          type: object
          additionalProperties:
            type: integer
          example:
            pending: 10
            accepted: 15
            rejected: 5
            application_submitted: 8
            hired: 7
            bonus_paid: 5
        byType:
          type: object
          additionalProperties:
            type: integer
          example:
            internal: 20
            external: 30
        bonusPayable:
          type: number
          format: decimal
          example: 5000.00
        totalBonusPaid:
          type: number
          format: decimal
          example: 15000.00

    # ==========================================
    # ERROR SCHEMAS
    # ==========================================
    Error:
      type: object
      properties:
        status:
          type: string
          example: error
        message:
          type: string
          example: An error occurred
        errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              message:
                type: string

    # ==========================================
    # SUCCESS SCHEMAS
    # ==========================================
    SuccessResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
        data:
          type: object
